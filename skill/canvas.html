<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">

  <title>Canvas Full Example</title>
  <style>
    canvas {
      width: 100%;
      max-width: 1000px;
      height: auto;
      border: 2px solid #333;
      background-color: #f8f9fa;
      display: block;
      margin: 20px auto;
      cursor: crosshair;
    }
    canvas.eraser-cursor {
      cursor: url('https://cdn-icons-png.flaticon.com/16/748/748137.png') 8 8, auto;
    }
    .controls {
      text-align: center;
      margin-bottom: 10px;
    }
    button {
      margin: 0 5px;
      padding: 10px 15px;
      width : 100px;
      height: 60px;
      border: none;
      border-radius: 5px;
      background-color: #1e90ff;
      color: white;
      cursor: pointer;
    }
    button.active {
      background-color: #ff4d4d;
    }
  </style>
</head>
<body>

  <div class="container controls">
    <div class="d-flex justify-content-between align-items-center mb-3">
      <h2 class="mt-1">ğŸ¨ Canvas</h2>
      <a href="../index.html" class="btn btn-danger">ë©”ì¸í˜ì´ì§€ë¡œ ì´ë™</a>
    </div>

    <!-- ë²„íŠ¼ ê·¸ë£¹ -->
    <div class="btn-group mb-3 w-100" role="group">
      <button id="drawModeBtn" class="btn btn-primary active">ê·¸ë¦¬ê¸°</button>
      <button id="eraserBtn" class="btn btn-primary">ì§€ìš°ê°œ</button>
      <button id="rectBtn" class="btn btn-primary">ì‚¬ê°í˜•</button>
      <button id="circleBtn" class="btn btn-primary">ì›</button>
      <button id="clearBtn" class="btn btn-secondary">ì´ˆê¸°í™”</button>
    </div>

    <!-- ì„¤ì • ì˜ì—­ -->
    <div class="row g-2 mb-3">
      <div class="col-sm-4 col-md-3">
        <label class="form-label mb-1">ê·¸ë¦¬ê¸° ìƒ‰ìƒ</label>
        <input type="color" class="form-control w-80" id="colorPicker" value="#222222" style="height: 40px;">
      </div>
      <div class="col-sm-4 col-md-3">
        <label class="form-label">ë¸ŒëŸ¬ì‹œ/ì§€ìš°ê°œ í¬ê¸°</label>
        <input type="range" class="form-range" id="sizeSlider" min="1" max="50" value="8" style="height: 1rem;">
      </div>
      <div class="col-sm-4 col-md-3">
        <label class="form-label">ë„í˜• í¬ê¸°</label>
        <input type="range" class="form-range" id="shapeSlider" min="10" max="200" value="50" style="height: 1rem;">
      </div>
    </div>
  </div>

  <!-- ìº”ë²„ìŠ¤ -->
  <canvas id="myCanvas" width="1000" height="600"></canvas>

  <script>
    // ìº”ë²„ìŠ¤ ë¶ˆëŸ¬ì˜¤ê¸°
    const canvas = document.getElementById("myCanvas");
    const ctx = canvas.getContext("2d");

    // ìƒíƒœ ë³€ìˆ˜
    let isDrawing = false;
    let mode = 'draw';
    let lastX = 0;
    let lastY = 0;
    let brushSize = 8;
    let shapeSize = 50;
    let drawColor = "#222222";

 
    const drawBtn = document.getElementById("drawModeBtn");
    const eraserBtn = document.getElementById("eraserBtn");
    const rectBtn = document.getElementById("rectBtn");
    const circleBtn = document.getElementById("circleBtn");
    const clearBtn = document.getElementById("clearBtn");
    const colorPicker = document.getElementById("colorPicker");
    const sizeSlider = document.getElementById("sizeSlider");
    const shapeSlider = document.getElementById("shapeSlider");

    // ëª¨ë“œ ë³€ê²½
    function setMode(newMode) {
      mode = newMode;
      document.querySelectorAll('button').forEach(btn => btn.classList.remove('active'));
      canvas.classList.remove('eraser-cursor');
      canvas.style.cursor = 'crosshair';

      if (mode === 'draw') drawBtn.classList.add('active');
      if (mode === 'eraser') {
        eraserBtn.classList.add('active');
        canvas.classList.add('eraser-cursor');
      }
      if (mode === 'rect') {
        rectBtn.classList.add('active');
        canvas.style.cursor = 'pointer';
      }
      if (mode === 'circle') {
        circleBtn.classList.add('active');
        canvas.style.cursor = 'pointer';
      }
    }

    drawBtn.onclick = () => setMode('draw');
    eraserBtn.onclick = () => setMode('eraser');
    rectBtn.onclick = () => setMode('rect');
    circleBtn.onclick = () => setMode('circle');

    // ì´ˆê¸°í™”
    clearBtn.onclick = () => {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
    };

    // ì‚¬ìš©ì ì„¤ì • ë°˜ì˜
    colorPicker.addEventListener("input", (e) => {
      drawColor = e.target.value;
    });

    sizeSlider.addEventListener("input", (e) => {
      brushSize = parseInt(e.target.value);
    });

    shapeSlider.addEventListener("input", (e) => {
      shapeSize = parseInt(e.target.value);
    });

    // ë§ˆìš°ìŠ¤ ë™ì‘
    canvas.addEventListener("mousedown", (e) => {
      isDrawing = true;
      lastX = e.offsetX;
      lastY = e.offsetY;

      if (mode === 'rect') {
        ctx.fillStyle = drawColor;
        ctx.fillRect(lastX - shapeSize / 2, lastY - shapeSize / 2, shapeSize, shapeSize);
        isDrawing = false;
      } else if (mode === 'circle') {
        ctx.beginPath();
        ctx.arc(lastX, lastY, shapeSize / 2, 0, Math.PI * 2);
        ctx.fillStyle = drawColor;
        ctx.fill();
        isDrawing = false;
      }
    });

    canvas.addEventListener("mouseup", () => isDrawing = false);
    canvas.addEventListener("mouseout", () => isDrawing = false);

    canvas.addEventListener("mousemove", (e) => {
      if (!isDrawing) return;
      const x = e.offsetX;
      const y = e.offsetY;

      if (mode === 'draw') {
        ctx.strokeStyle = drawColor;
        ctx.lineWidth = brushSize;
        ctx.beginPath();
        ctx.moveTo(lastX, lastY);
        ctx.lineTo(x, y);
        ctx.stroke();
      } else if (mode === 'eraser') {
        ctx.clearRect(x - brushSize / 2, y - brushSize / 2, brushSize, brushSize);
      }

      lastX = x;
      lastY = y;
    });
  </script>
</body>
</html>
